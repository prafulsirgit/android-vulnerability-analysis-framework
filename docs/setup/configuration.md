# Configuration Guide

This document provides detailed instructions on how to configure the Android Vulnerability Analysis Framework after installation. Proper configuration ensures that the framework is set up correctly and functions as expected.

## 1. Environment Setup

Before configuring the framework, make sure your environment meets the necessary prerequisites:

### Prerequisites
- **Java Development Kit (JDK)**: Version 8 or higher. Ensure the `JAVA_HOME` environment variable is set correctly.
- **Python**: Version 3.6 or higher. Make sure `python` and `pip` are added to your PATH.
- **Git**: For version control and repository management.

### Setting Up Environment Variables

1. **JAVA_HOME**:
   - On Windows, go to System Properties > Advanced > Environment Variables.
   - Add a new variable `JAVA_HOME` with the path to your JDK installation (e.g., `C:\Program Files\Java\jdk-11.0.1`).

2. **ANDROID_HOME** (if using Android SDK):
   - Add a new variable `ANDROID_HOME` with the path to your Android SDK (e.g., `C:\Users\<YourUsername>\AppData\Local\Android\Sdk`).

3. **Codacy Configuration**:
   - You'll need a Codacy API token for integration. You can generate this from your Codacy account.
   - Add a new variable `CODACY_PROJECT_TOKEN` with your project's Codacy token.

## 2. Tool Configuration

### Codacy

1. **Integration with GitHub**:
   - Go to your Codacy dashboard.
   - Select the GitHub repository you want to link.
   - Follow the steps to add the Codacy analysis tool to your repository.

2. **Setting Up Codacy for Local Analysis**:
   - Install the Codacy CLI tool:  
     ```bash
     npm install -g codacy-cli
     ```
   - Run Codacy analysis locally using the CLI:
     ```bash
     codacy analyze --tool <tool_name> --project_token $CODACY_PROJECT_TOKEN
     ```

### PMD

1. **Download and Install PMD**:
   - Download PMD from the [official website](https://pmd.github.io/).
   - Unzip the downloaded file to a directory of your choice.

2. **Configuring PMD**:
   - Create a configuration file (e.g., `pmd.xml`) with your desired rules.
   - Run PMD from the command line:
     ```bash
     pmd -d <directory_to_analyze> -R pmd.xml -f text
     ```

3. **Integrating with the Framework**:
   - Place your `pmd.xml` file in the framework's `config/` directory.
   - Modify the framework's configuration to point to your custom PMD configuration.

### Android Lint

1. **Setup Android Lint**:
   - Android Lint is part of the Android SDK, so ensure your SDK is up-to-date.
   - Run Android Lint on your project:
     ```bash
     ./gradlew lint
     ```

2. **Custom Lint Rules**:
   - Create custom lint rules if necessary.
   - Place the custom lint rules in the `lint/` directory within your project.

## 3. Configuration Files

The framework uses several configuration files to customize its behavior. These files are located in the `config/` directory:

### `config/framework-config.yml`

This file contains the general configuration for the framework.

- **Example Structure**:
    ```yaml
    analysis:
      tools:
        - codacy
        - pmd
        - android_lint
      output:
        format: html
        directory: reports/
    ```

### `config/tool-config.yml`

This file contains tool-specific configurations.

- **Example Structure**:
    ```yaml
    codacy:
      api_token: "<Your Codacy API Token>"
      project_token: "<Your Project Token>"
    pmd:
      ruleset: "config/pmd.xml"
    android_lint:
      custom_rules: "lint/"
    ```

## 4. Running the Framework

After configuring the necessary files, run the framework from the root directory:

```bash
python run_framework.py --config config/framework-config.yml
```
This command will start the analysis using the specified configuration. Check the reports/ directory for the generated reports.

## 5. Troubleshooting
If you encounter any issues, check the following:

Ensure all environment variables are set correctly.
Verify that all paths in configuration files are correct.
Check the logs in the logs/ directory for detailed error messages.
For further assistance, refer to the FAQ or open an issue in the GitHub repository.